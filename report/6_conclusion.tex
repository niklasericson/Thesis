% !TEX root = main.tex
\chapter{Conclusion and Future work}\label{cha:conclusion}
This thesis has investigating in different control approaches aiming to improve the tracking capability of the crystals used in the UA9 collimation studies at \abbrCERN. The investigation showed that the \abbrIRC method can be used efficiently to attenuate the first resonance mode and increase the closed loop bandwidth. It also showed that the \abbrMRACPE can be used to adapt to the model changes and prevent instability and that harmonic cancellation can be used to efficiently damp out known harmonic disturbances. Finally a feedforward harmonic cancellation method (\abbrRFDC) was implemented and proposed as an add-on control algorithm. This algorithm was first introduced for the control of hardware drives but has in this thesis shown to be effective with piezo electric actuators and monolithic structures as well.


\section{Conclusions}
The adaptive controller was tuned to handle a maximum step size of \unit{20}{\milli\radian} i.e. the rotational range. This tuning maintains stability but gives a quite slow adaption process for small steps. If the initial values would be set to the values that $k_i$ settles to for a given input, a faster step response could be expected. This can be seen in Figure~\ref{fig:periodic_resp} where the controller performs better for the second period. In other words, initial values could be selected more wisely to obtain a quicker convergence.  The simulation was performed without any saturation on the input signal, indicating that the amplitude dependent behavior shown in Figure~\ref{fig:step_adaptive} might be due to numerical errors. A higher sampling rate would solve this issue.
%. One can see that the adaptation process is slower for the periodic response corresponding to the amplitude of \unit{10}{\milli\radian}, hence the lower the step, the longer the adaptation time.

The \abbrIRC method performed well in the simulations showing good attenuation of the first resonance peak. Due to its high bandwidth, it was expected that the \abbrIRC should outperform the present controller with respect to tracking performance. However, neither the present nor the \abbrIRC eliminates the constant ramp tracking error completely due to non existing pure integrator in the controller. The high bandwidth also implies in a controller that is more sensitive to measurement noise and to model errors in terms of stability, as shown in Figure~\ref{fig:model_dist_high_order}.


As seen in the zoom-in, the \abbrIRC is slightly more damped but has a high frequency ringing in 448Hz, the same frequency as the model's second resonance peak. In reality it would be plenty of  higher resonance (all are not modeled) that will lead to more ringing and bad disturbance rejection.

Easy to amplify instead of cancel, disturbance feedforward. In general, this method is not robust to model changes and can easily amplify non-modeled disturbance behavior. Not the same behavior for in and out.


All experimental tests were performed on a damaged rotational stage, which implied in a standard deviation varying between \unit{1}{\micro\radian} and \unit{5}{\micro\radian} in closed loop operation. Such a large varying standard deviation makes it difficult to compare 2 acquisitions that was not successively acquired directly after one another. Hence, the reduction of the yaw angle shown in for instance Figure~\ref{fig:yl_closedloop_80} and \ref{fig:yl_closedloop_50} should only be taken as an indication of the harmonic cancellation capability. This also explains the big difference between the open and closed loop performance, shown in Figure~\ref{fig:fft_openloop_80} and Figure~\ref{fig:fft_closedloop_80}, that in theory should have the same , cancellation performance after the response has settled.

Acquisitions were also taken under non-optimal circumstances with ongoing construction work close to the laboratory area. This explains some of the quick oscillations in the cancellation effectiveness seen as a temporarily increase in the yaw angle deviation in Figure~\ref{fig:transient_closedloop_50}. However, these disturbances are usually very low frequent and does not affect the high frequency region in the \abbrFFT.

beat effect

The observer cannot be on all time, creating feedback


\section{Future work}
In the future, the tracking capability could be enhanced even further by combining some of the methods used in this thesis. For example to increase bandwidth and tracking capability the \abbrIRC could be implemented, and for the rejection of specific induced harmonics, the \abbrRFDC could be used without deteriorating the sensitivity to disturbances and model errors. Also an adaptive approach might be valuable to measure and adapt the controller parameters to long term effects such as thermal effects and aging of the piezoelectric actuator.

Improvement in the mechanical design could also be done. In fact, a new, high stiffness rotational stage has already been manufactured with the aim of increasing the stiffness of the system and thereby also extending the bandwidth, allowing for a more precise tracking and a better disturbance rejection. Even though it has a higher bandwidth than the previous stage, different angular and linear positions still changes the linear model drastically. The \abbrIRC is a promising control technique for handling these kind of model changes since it only uses a negative feedforward to damp out the first resonance peak and has no direct information of where the first resonance peak may be located. However, further investigation has to be carried out on this in order to gain a better knowledge about the controller's behavior and applicability.

To improve the already implemented \abbrRFDC method, several of adjustments can be made. For instance, a big drawback is that the frequencies that can be selected as subject for cancellation must have an integer number of periods that is a multiple of the sampling time. To achieve intersample disturbance rejection, a multi rate control technique with a control period shorter than the sampling period can be implemented, as proposed in \citep{fujimoto2009rro}. To get rid of the beat effect, a technique trying to regularly synchronize the observed and replicated disturbance could be implemented. One way could be to observe the disturbance all the time and only use a few elements to synchronize the phase of the replicated disturbance. Another could just be to do new observations and replications regularly, but how this technique would work in its full is left for future investigation.
